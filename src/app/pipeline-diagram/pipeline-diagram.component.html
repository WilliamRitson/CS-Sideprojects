

<md-card class="big-card flex-stack-card">
  <md-card-title>MIPS Program</md-card-title>
  <md-card-content>
	  <textarea [(ngModel)]="program" rows="30" cols="60" class="text-editor"></textarea>
  </md-card-content>
</md-card>

<md-card class="big-card flex-stack-card">
  <md-card-title>Pipeline Diagram</md-card-title>
  <md-card-content>
	  <table>
		<thead>
			<tr>
				<td>#</td>
				<td>Code</td>
				<td>Deps</td>
				<td *ngFor="let stage of getStages(); let i=index">
					{{i + 1}}
				</td>
			</tr>
		</thead>
		<tbody>
			<tr *ngFor="let line of lines">
				<td>{{line.lineNumber}}</td>
				<td>{{line.id}}</td>
				<td>{{line.dependencyString()}}</td>
				<td *ngFor="let stage of line.stages" [class.forwarded]="line.forwards[stage]">{{stage}}</td>
			</tr>
		</tbody>
	</table>
  </md-card-content>
  <md-card-actions>
	  <button md-button color="primary"(click)="runCycle()">Run Cycle</button>
	  <button md-button color="primary"(click)="recompile()">Run All</button>
  </md-card-actions>
</md-card>
<!--
<table>
	<thead>
		<tr>
			<th>Register</th>
			<th>Owner</th>
		</tr>
	</thead>
	<tbody>
		<tr *ngFor="let regOwner of iter(currentPipe.registers); let register=index">
			<td>{{regOwner[0]}}</td>
			<td>{{regOwner[1] ? regOwner[1].source : "unused"}}</td>
		</tr>
	</tbody>
</table>
-->

<md-card class="big-card flex-stack-card">
  <md-card-title>Configuration</md-card-title>
  <md-card-content>
	  <md-checkbox [(ngModel)]="currentPipe.forwarding">Use forwarding</md-checkbox>
	  <table>
		<thead>
			<tr>
				<th>Instruciton</th>
				<th>Uses Memory Stage</th>
				<th>Execution Lenth</th>
				<th>Functional Unit</th>
				<th>Point of Produciton</th>
				<th>Point of Consumption</th>
				<th>Stages</th>
			</tr>
		</thead>
		<tbody>
			<tr *ngFor="let config of configs">
				<td>{{config.instruciton}}</td>
				<td><md-checkbox [(ngModel)]="config.hasMemory"></md-checkbox></td>
				<td><md-input type="number" [(ngModel)]="config.executeLength"></md-input></td>
				<td>
					<select [(ngModel)]="config.functionalUnit">
						<option *ngFor="let funcUnit of functionalUnits">{{funcUnit.name}}</option>
					</select>
				</td>
				<td>
					<select [(ngModel)]="config.pointOfCompletion">
						<option *ngFor="let stage of config.resolve()">{{stage}}</option>
					</select>
				</td>
				<td>
					<select [(ngModel)]="config.pointOfConsumption">
						<option *ngFor="let stage of config.resolve()">{{stage}}</option>
					</select>
				</td>
				<td>{{config.resolve()}}</td>
			</tr>
		</tbody>
	</table>
  </md-card-content>
</md-card>
<!--
<table>
	<thead>
		<tr>
			<th>Functional Unit </th>
			<th>Pipelined </th>
			<th>Execute Time </th>
			<th>Execution Units </th>
			<th>Reservation Stations</th>
		</tr>
	</thead>
	<tbody>
		<tr *ngFor="let functionalUnit of functionalUnits">
			<td><input type="text" [(ngModel)]="functionalUnit.name"></td>
			<td><input type="checkbox" [(ngModel)]="functionalUnit.isPipelined"></td>
			<td><input type="number" [(ngModel)]="functionalUnit.executeLength"></td>
			<td><input type="number" [(ngModel)]="functionalUnit.units"></td>
			<td><input type="number" [(ngModel)]="functionalUnit.reservationStations"></td>
		</tr>
		<tr>
			<td colspan="5"><button (click)="addFU()">Add Funcitonal Unit</button> </td>
		</tr>
	</tbody>
</table>
-->


